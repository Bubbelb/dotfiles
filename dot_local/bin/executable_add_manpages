#!/bin/sh

 apk list -I |    # get all installed packages...
    # for all non-doc packages, strip off the version and append -doc...
    awk '!/(-doc)/ { print gensub(/^(.*)-[[:digit:]].*/, "\\1-doc", "g", $1); }' |
    # ...get apk to tell us what is real and what isn't...
    xargs apk search |
    # ...strip off the version yet again (apk add doesn't like it)...
    awk '{ print gensub(/^(.*)-[[:digit:]].*/, "\\1", "g", $1); }' |
    # ...and then actually install them.
    xargs -rt sudo apk add -i
